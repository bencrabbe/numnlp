

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Search Engine exercise &#8212; Numerical methods in NLP (foundations)</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/proof.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=bd9e20870c6007c4c509" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=bd9e20870c6007c4c509" />
  <script src="_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=bd9e20870c6007c4c509"></script>

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'search_engine';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <header>
  
    <div class="bd-header navbar navbar-expand-lg bd-navbar">
    </div>
  
  </header>

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logoUPC.png" class="logo__image only-light" alt="Numerical methods in NLP (foundations) - Home"/>
    <script>document.write(`<img src="_static/logoUPC.png" class="logo__image only-dark" alt="Numerical methods in NLP (foundations) - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Numerical methods for Natural Language Processing
                </a>
            </li>
        </ul>
        <ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="vectors.html">Vectors and vector spaces</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="numpy_exercises.html">Numpy exercises</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="euclid.html">The euclidean space</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="Euclid_exercises.html">Euclidean spaces : exercises</a></li>

<li class="toctree-l2"><a class="reference internal" href="euclid_appendix.html">Appendix to Euclidean spaces</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="vec2text.html">Applications to information retrieval</a></li>
<li class="toctree-l1"><a class="reference internal" href="matrices.html">Matrices</a></li>
<li class="toctree-l1"><a class="reference internal" href="graphs.html">Applications to graph analysis : the PageRank algorithm</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="stats.html">Applications to statistical analysis : latent semantic analysis</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="ir.html">Search Engine exercise</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="optim.html">Optimization basics</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="optim_exercises.html">Optimization exercises</a></li>
</ul>
</li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">


<a href="http://github.com/bencrabbe/numnlp/issues/new?title=Issue%20on%20page%20%2Fsearch_engine.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button"
   title="Open an issue"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>

</a>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/search_engine.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Search Engine exercise</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#view-documents">View documents</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#perform-a-query">Perform a query</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#preprocess-data">Preprocess data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#create-vocabulary">Create vocabulary</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="search-engine-exercise">
<h1>Search Engine exercise<a class="headerlink" href="#search-engine-exercise" title="Permalink to this heading">#</a></h1>
<p>TODO :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">spacy</span>
<span class="ow">and</span> <span class="n">install</span> <span class="n">enwordsm</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">ir_measures</span>
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;cisi_all.json&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">docstream</span><span class="p">:</span>
    <span class="n">docset</span>     <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">docstream</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;cisi_queries.json&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">qstream</span><span class="p">:</span>
    <span class="n">queries</span>     <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">qstream</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>


<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Total number of documents&#39;</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">docset</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Total number of queries&#39;</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">queries</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Total number of documents 1460
Total number of queries 112
</pre></div>
</div>
</div>
</div>
<section id="view-documents">
<h2>View documents<a class="headerlink" href="#view-documents" title="Permalink to this heading">#</a></h2>
<p>The following code displays the first 10 documents of the collection</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">docset</span><span class="p">[:</span><span class="mi">10</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;doc_id:&#39;</span><span class="p">,</span><span class="n">doc</span><span class="p">[</span><span class="s1">&#39;doc_id&#39;</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;text:&#39;</span><span class="p">,</span><span class="n">doc</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="o">*</span><span class="mi">80</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>doc_id: 1
text: The present study is a history of the DEWEY Decimal Classification. The first edition of the DDC was published in 1876, the eighteenth edition in 1971, and future editions will continue to appear as needed. In spite of the DDC&#39;s long and healthy life, however, its full story has never been told. There have been biographies of Dewey that briefly describe his system, but this is the first attempt to provide a detailed history of the work that more than any other has spurred the growth of librarianship in this country and abroad.
--------------------------------------------------------------------------------
doc_id: 2
text: This report is an analysis of 6300 acts of use in 104 technical libraries in the United Kingdom. Library use is only one aspect of the wider pattern of information use. Information transfer in libraries is restricted to the use of documents. It takes no account of documents used outside the library, still less of information transferred orally from person to person. The library acts as a channel in only a proportion of the situations in which information is transferred. Taking technical information transfer as a whole, there is no doubt that this proportion is not the major one. There are users of technical information - particularly in technology rather than science - who visit libraries rarely if at all, relying on desk collections of handbooks, current periodicals and personal contact with their colleagues and with people in other organizations. Even regular library users also receive information in other ways.
--------------------------------------------------------------------------------
doc_id: 3
text: The relationships between the organization and control of writings and the organization and control of knowledge and information will inevitably enter our story, for writings contain, along with much else, a great deal of mankind&#39;s stock of knowledge and information. Bibliographical control is a form of power, and if knowledge itself is a form of power, as the familiar slogan claims, bibliographical control is in a certain sense power over power, power to obtain the knowledge recorded in written form. As writings are not simply, and not in any simple way, storehouses of knowledge, we cannot satisfactorily discuss bibliographical control as simply control over the knowledge and information contained in writings.
--------------------------------------------------------------------------------
doc_id: 4
text: The establishment of nine new universities in the 1960&#39;s provoked a highly stimulating re-examination of the nature, purpose and management of academic libraries. Long-established attitudes and methods were questioned, but although changes were made, the basic difficulty remained - a lack of objective information about the best ways of providing a library service in a university. The report of the UGC Committee on Libraries (the Parry Repot [267]), which, in general, endorsed these changes, also stressed the need for research into all aspects of academic library provision.
--------------------------------------------------------------------------------
doc_id: 5
text: Although the use of games in professional education has become widespread only during the last decade, the method has been used in a number of fields for many hundreds of years. Its origins have been traced to simple war games, used in military training when the &quot;real thing&quot; was either unavailable or too dangerous. In more recent times, these games have become more and more sophisticated, and many now use large electronic computers to handle the complex calculations involved. Since 1956, when the first well-developed management game was introduced, the technique has spread rapidly into a wide variety of disciplines and today it is used at all levels of education, from primary school classes to courses for experienced professional men and women. One of the main causes of this &quot;game explosion&quot; has been the rapid development of sophisticated management techniques, such as simulation and mathematical modelling, which have been made possible by rapid advances in computer technology.
--------------------------------------------------------------------------------
doc_id: 6
text: Graduate library school study of abstracting should be more than a how-to-do-it course. It should include general material on the characteristcs and types of abstracts, the historical development of abstracting publications, the abstract-publishing industry (especially in the United States), and the need for standards in the preparation and evaluation of the product. These topics we call concepts. The text includes a methods section containing instructions for writing various types of abstracts, and for editing and preparing abstracting publications. These detailed instructions are supplemented by examples and exercises in the appendix. There is a brief discussion of indexing of abstract publications. Research on automation has been treated extensively in this work, for we believe that the topic deserves greater emphasis than it has received in the past. Computer use is becoming increasingly important in all aspects of librarianship. Much research effort has been expended on the preparation and evaluation of computer-prepared abstracts and extracts. Students, librarians, and abstractors will benefit from knowing about this research and understanding how computer programs were researched to analyze text, select key sentences, and prepare extracts and abstracts. The benefits of this research are discussed. Abstracting is a key segment of the information industry. Opportunities are available for both full-time professionals and part-time or volunteer workers. Many librarians find such activities pleasant and rewarding, for they know they are contributing to the more effective use of stored information. One chapter is devoted to career opportunities for abstractors.
--------------------------------------------------------------------------------
doc_id: 7
text: This book attempts to present representative examples of successful architectural solutions to the important problems librarians and architects face in planning new college and university library buildings or in remodeling and enlarging existing structures. It does not attempt to make case study evaluations, as was done by Ellsworth Mason for Brown and Yale. Nor does it present examples of unsuccessful solutions except to show how to avoid mistakes, and in these cases the libraries will not be identified.
--------------------------------------------------------------------------------
doc_id: 8
text: As important for staff members&#39; individual development as was the apprenticeship in administration, perhaps the most significant attitude one acquired while working for Guy was engendered by his insistence that librarians must be interested in and knowledgeable about the content of the materials with which they dealt. His love of literature, his respect for scholarship, his admiration for good writing and reading were manifested in many ways, but most notably in his admonition that, though we were primarily a research library, we must constantly keep in mind our obligation to collect contemporary poetry, fiction and belles-letters. It was primarily up to the library staff, he felt, to be responsible for these as well as for &quot;general&quot; books which crossed disciplinary lines or fell between the disciplines, those books which a faculty mostly concerned with research materials is apt to overlook. And in building this portion of the collection, &quot;there is no substitute for a thorough acquaintance with books through a reading of critical reviews and the books themselves.&quot; This counsel is from The President, the Professor, and the College Library, but the importance of its thrust--the need to keep up with the world of books and publishing--was continually impressed upon us.
--------------------------------------------------------------------------------
doc_id: 9
text: This study assumed that an additional use study held less promise than an analytical consideration of concepts. The basic approach was a survey comparing traditional and current professional ideas on direct access. Principal data-gathering instruments were documentary analysis and opinion questionnaire. Findings of the documentary analysis included the following: Research from 1890 to 1970 on the direct shelf approach and browsing left the problems largely unresolved and evidently resistant to established methods of use and user research. The need for an exhaustive study of concepts was confirmed. Open shelf libraries--organized through shelf classification and relative location--were meant to arouse the intellectual, social, and political interest of the average citizen and affect his democratic self-realization. Definitions of &quot;browsing&quot; varied greatly: self-indulgence by the untutored in objectionable works; beneficial self-education for the general reader; valuable guidance for the scholar in his research.
--------------------------------------------------------------------------------
doc_id: 10
text: The purpose of this study was to develop, evaluate, and recommend a national plan for improving access to periodical resources. About 48 percent of all academic interlibrary loans are for periodical materials, with the bulk of the loans being satisfied in the form of photocopies. A major consideration in the long-range improvement of the interlibrary loan system is the possible augmentation with a national system for acquiring, storing, and satisfying loan requests for periodical materials. This study focused on the physical access to the periodical literature. Based on the needs of the library community, design features were developed, and included the following: Service should be made available to all users without any restriction other than access through a library. Initially, the service should be confined primarily to rapid, dependable delivery of photocopies of journal articles. The collection of a center should be comprehensive in subject coverage excluding only medicine. All worthwhile journals should be collected irrespective of language.
--------------------------------------------------------------------------------
</pre></div>
</div>
</div>
</div>
</section>
<section id="perform-a-query">
<h2>Perform a query<a class="headerlink" href="#perform-a-query" title="Permalink to this heading">#</a></h2>
<p>Each query has an ID and a query text. We display the 10 first queries:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">query</span> <span class="ow">in</span> <span class="n">queries</span><span class="p">[:</span><span class="mi">10</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;query_id:&#39;</span><span class="p">,</span><span class="n">query</span><span class="p">[</span><span class="s1">&#39;query_id&#39;</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;text:&#39;</span><span class="p">,</span><span class="n">query</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">])</span>
    
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>query_id: 1
text: What problems and concerns are there in making up descriptive titles? What difficulties are involved in automatically retrieving articles from approximate titles? What is the usual relevance of the content of articles to their titles?
query_id: 2
text: How can actually pertinent data, as opposed to references or entire articles themselves, be retrieved automatically in response to information requests?
query_id: 3
text: What is information science? Give definitions where possible.
query_id: 4
text: Image recognition and any other methods of automatically transforming printed text into computer-ready form.
query_id: 5
text: What special training will ordinary researchers and businessmen need for proper information management and unobstructed use of information retrieval systems? What problems are they likely to encounter?
query_id: 6
text: What possibilities are there for verbal communication between computers and humans, that is, communication via the spoken word?
query_id: 7
text: Describe presently working and planned systems for publishing and printing original papers by computer, and then saving the byproduct, articles coded in data-processing form, for further use in retrieval.
query_id: 8
text: Describe information retrieval and indexing in other languages. What bearing does it have on the science in general?
query_id: 9
text: What possibilities are there for automatic grammatical and contextual analysis of articles for inclusion in an information retrieval system?
query_id: 10
text: The use of abstract mathematics in information retrieval, e.g. group theory.
</pre></div>
</div>
</div>
</div>
</section>
<section id="preprocess-data">
<h2>Preprocess data<a class="headerlink" href="#preprocess-data" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">spacy</span>
<span class="kn">import</span> <span class="nn">string</span>

<span class="n">stopwords</span> <span class="o">=</span> <span class="n">spacy</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">get_lang_class</span><span class="p">(</span><span class="s1">&#39;en&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">Defaults</span><span class="o">.</span><span class="n">stop_words</span>
<span class="n">stopwords</span><span class="o">.</span><span class="n">update</span><span class="p">([</span><span class="s1">&#39;the&#39;</span><span class="p">,</span> <span class="s1">&#39;of&#39;</span><span class="p">,</span> <span class="s1">&#39;be&#39;</span><span class="p">,</span> <span class="s1">&#39;and&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">,</span> <span class="s1">&#39;in&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;..&#39;</span><span class="p">,</span> <span class="s1">&#39;for&#39;</span><span class="p">,</span> <span class="s1">&#39;that&#39;</span><span class="p">,</span> <span class="s1">&#39;have&#39;</span><span class="p">])</span>
<span class="n">tokenizer</span> <span class="o">=</span> <span class="n">spacy</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;en_core_web_sm&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">preproc_doc</span><span class="p">(</span><span class="n">text</span><span class="p">,</span><span class="n">lower</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">lemma_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">TOKEN</span> <span class="ow">in</span> <span class="n">tokenizer</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
       <span class="n">lemma</span> <span class="o">=</span> <span class="n">TOKEN</span><span class="o">.</span><span class="n">lemma_</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">if</span> <span class="n">lower</span> <span class="k">else</span> <span class="n">TOKEN</span><span class="o">.</span><span class="n">lemma_</span> 
       <span class="k">if</span> <span class="n">lemma</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">stopwords</span> <span class="ow">and</span> <span class="n">lemma</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">string</span><span class="o">.</span><span class="n">punctuation</span><span class="p">:</span> 
           <span class="n">lemma_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">TOKEN</span><span class="o">.</span><span class="n">lemma_</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lemma_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="create-vocabulary">
<h2>Create vocabulary<a class="headerlink" href="#create-vocabulary" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Counter</span>

<span class="k">def</span> <span class="nf">make_vocab</span><span class="p">(</span><span class="n">docset</span><span class="p">,</span><span class="n">max_vocab_size</span><span class="o">=</span><span class="mi">50000</span><span class="p">):</span>
    
    <span class="n">vocab_counts</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">docset</span><span class="p">:</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">preproc_doc</span><span class="p">(</span><span class="n">doc</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">])</span>
        <span class="n">vocab_counts</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  Total vocabulary size&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">vocab_counts</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  Vocabulary size&#39;</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">vocab_counts</span><span class="p">),</span><span class="n">max_vocab_size</span><span class="p">))</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">word</span> <span class="k">for</span> <span class="n">word</span><span class="p">,</span><span class="n">C</span> <span class="ow">in</span> <span class="n">vocab_counts</span><span class="o">.</span><span class="n">most_common</span><span class="p">(</span><span class="n">max_vocab_size</span><span class="p">)]</span>

<span class="k">def</span> <span class="nf">index_vocab</span><span class="p">(</span><span class="n">vocab_list</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span> <span class="p">(</span><span class="n">word</span><span class="p">,</span><span class="n">idx</span><span class="p">)</span> <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">word</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">vocab_list</span><span class="p">))</span>
    
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="k">def</span> <span class="nf">bow_TXD</span><span class="p">(</span><span class="n">docset</span><span class="p">,</span><span class="n">vocab_list</span><span class="p">,</span><span class="n">vocabulary</span><span class="p">):</span>
    <span class="n">ncols</span>  <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">docset</span><span class="p">)</span>
    <span class="n">mlines</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">vocab_list</span><span class="p">)</span>
    <span class="n">TXD</span>    <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">mlines</span><span class="p">,</span><span class="n">ncols</span><span class="p">))</span>

    <span class="k">for</span> <span class="n">jdx</span><span class="p">,</span> <span class="n">doc</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">docset</span><span class="p">):</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">preproc_doc</span><span class="p">(</span><span class="n">doc</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">])</span>
        <span class="n">counts</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
        <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">counts</span><span class="o">.</span><span class="n">elements</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">vocabulary</span><span class="p">:</span>
                <span class="n">idx</span> <span class="o">=</span> <span class="n">vocabulary</span><span class="p">[</span><span class="n">word</span><span class="p">]</span>
                <span class="n">TXD</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span><span class="n">jdx</span><span class="p">]</span> <span class="o">=</span> <span class="n">counts</span><span class="p">[</span><span class="n">word</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">TXD</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">tf</span><span class="p">(</span><span class="n">docvec</span><span class="p">):</span>
    <span class="n">Z</span> <span class="o">=</span> <span class="n">docvec</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">Z</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>      <span class="c1">#some rows have zero counts (in case some texts are empty)</span>
        <span class="k">return</span> <span class="n">docvec</span> <span class="o">/</span> <span class="n">Z</span>
    <span class="k">return</span> <span class="n">docvec</span>
    
<span class="k">def</span> <span class="nf">idf</span><span class="p">(</span><span class="n">termvec</span><span class="p">):</span>
    <span class="n">ndocs</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">termvec</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">ndocs</span> <span class="o">/</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">count_nonzero</span><span class="p">(</span><span class="n">termvec</span><span class="p">)))</span> 

<span class="k">def</span> <span class="nf">idfvec</span><span class="p">(</span><span class="n">tdmat</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">idf</span><span class="p">(</span><span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">tdmat</span><span class="p">])</span> 

<span class="k">def</span> <span class="nf">tfidf</span><span class="p">(</span><span class="n">doc_vec</span><span class="p">,</span><span class="n">idf_vec</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">tf</span><span class="p">(</span><span class="n">doc_vec</span><span class="p">)</span> <span class="o">*</span> <span class="n">idf_vec</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">numpy.linalg</span> <span class="kn">import</span> <span class="n">norm</span>

<span class="k">def</span> <span class="nf">score_doc</span><span class="p">(</span><span class="n">qvec</span><span class="p">,</span><span class="n">docvec</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">qvec</span> <span class="o">@</span> <span class="n">docvec</span> <span class="o">/</span> <span class="p">(</span><span class="n">norm</span><span class="p">(</span><span class="n">qvec</span><span class="p">)</span><span class="o">*</span><span class="n">norm</span><span class="p">(</span><span class="n">docvec</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<p>For querying, we have the SVD equation:</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align*}
\mathbf{X} &amp;= \mathbf{T}\Sigma\mathbf{D}^\top\\
\mathbf{T}^\top \mathbf{X} &amp;= \Sigma\mathbf{D}^\top\\
\Sigma^{-1}\mathbf{T}^\top \mathbf{X} &amp;= \mathbf{D}^\top
\end{align*}
\end{split}\]</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">numpy.linalg</span> <span class="kn">import</span> <span class="n">svd</span>

<span class="k">class</span> <span class="nc">IRModel</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">docset</span><span class="p">,</span> <span class="n">use_tfidf</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">use_svd</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">max_vocab_size</span><span class="o">=</span><span class="mi">20000</span><span class="p">,</span> <span class="n">k</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">use_tfidf</span> <span class="o">=</span> <span class="n">use_tfidf</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">use_svd</span>   <span class="o">=</span> <span class="n">use_svd</span>
        
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Building vocabulary...&#39;</span><span class="p">)</span>
        <span class="n">vocab_list</span>      <span class="o">=</span> <span class="n">make_vocab</span><span class="p">(</span><span class="n">docset</span><span class="p">,</span><span class="n">max_vocab_size</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vocabulary</span> <span class="o">=</span> <span class="n">index_vocab</span><span class="p">(</span><span class="n">vocab_list</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Building term document matrix...&#39;</span><span class="p">)</span>
        <span class="n">tdmat</span>           <span class="o">=</span> <span class="n">bow_TXD</span><span class="p">(</span><span class="n">docset</span><span class="p">,</span><span class="n">vocab_list</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">vocabulary</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_tfidf</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">idfvec</span>     <span class="o">=</span> <span class="n">idfvec</span><span class="p">(</span><span class="n">tdmat</span><span class="p">)</span>
            <span class="n">tdmat</span>           <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">tfidf</span><span class="p">(</span><span class="n">docvec</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">idfvec</span><span class="p">)</span> <span class="k">for</span> <span class="n">docvec</span> <span class="ow">in</span> <span class="n">tdmat</span><span class="o">.</span><span class="n">T</span> <span class="p">])</span><span class="o">.</span><span class="n">T</span> 
        
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_svd</span><span class="p">:</span>
            
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Computing SVD...&#39;</span><span class="p">)</span>
            <span class="n">U</span><span class="p">,</span><span class="n">sigma</span><span class="p">,</span><span class="n">Vt</span> <span class="o">=</span> <span class="n">svd</span><span class="p">(</span><span class="n">tdmat</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">k</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">k</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">sigma</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sigma</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">k</span><span class="p">)</span> <span class="p">)</span>
            <span class="n">np</span><span class="o">.</span><span class="n">fill_diagonal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sigma</span><span class="p">,</span><span class="n">sigma</span><span class="p">[:</span><span class="n">k</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">U</span>      <span class="o">=</span> <span class="n">U</span><span class="p">[:,:</span><span class="n">k</span><span class="p">]</span>
            <span class="n">tdmat</span>       <span class="o">=</span> <span class="n">Vt</span><span class="p">[:</span><span class="n">k</span><span class="p">,:]</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;U shape&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">U</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Vt shape&#39;</span><span class="p">,</span><span class="n">tdmat</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
            
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;shape&#39;</span><span class="p">,</span><span class="n">tdmat</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>            
        
        <span class="bp">self</span><span class="o">.</span><span class="n">docvecs</span> <span class="o">=</span> <span class="p">{</span><span class="nb">str</span><span class="p">(</span><span class="n">idx</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span><span class="n">docvec</span> <span class="k">for</span> <span class="n">idx</span><span class="p">,</span><span class="n">docvec</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">tdmat</span><span class="o">.</span><span class="n">T</span><span class="p">)}</span>
        
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;done&#39;</span><span class="p">)</span>

    
    <span class="k">def</span> <span class="nf">query2vec</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">query</span><span class="p">):</span>
        
        <span class="n">text</span> <span class="o">=</span> <span class="n">preproc_doc</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
        
        <span class="n">counts</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
        <span class="n">docvec</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vocabulary</span><span class="p">))</span> 
        <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">counts</span><span class="o">.</span><span class="n">elements</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">word</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">vocabulary</span><span class="p">:</span>
                <span class="n">idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vocabulary</span><span class="p">[</span><span class="n">word</span><span class="p">]</span>
                <span class="n">docvec</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">counts</span><span class="p">[</span><span class="n">word</span><span class="p">]</span>
        
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_tfidf</span><span class="p">:</span>
            <span class="n">docvec</span> <span class="o">=</span> <span class="n">tfidf</span><span class="p">(</span><span class="n">docvec</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">idfvec</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_svd</span><span class="p">:</span>
            <span class="n">docvec</span> <span class="o">=</span>  <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">inv</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sigma</span><span class="p">)</span> <span class="o">@</span> <span class="bp">self</span><span class="o">.</span><span class="n">U</span><span class="o">.</span><span class="n">T</span> <span class="o">@</span> <span class="n">docvec</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">docvec</span>

    
    <span class="k">def</span> <span class="nf">make_run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">queries</span><span class="p">,</span> <span class="n">kresults</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="n">run</span> <span class="o">=</span> <span class="p">[</span> <span class="p">]</span>
        <span class="k">for</span> <span class="n">query</span> <span class="ow">in</span> <span class="n">queries</span><span class="p">:</span>
            <span class="n">qvec</span>       <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query2vec</span><span class="p">(</span><span class="n">query</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">])</span>
            <span class="n">raw_scores</span> <span class="o">=</span> <span class="p">[</span> <span class="p">(</span><span class="n">score_doc</span><span class="p">(</span><span class="n">qvec</span><span class="p">,</span><span class="n">docvec</span><span class="p">),</span><span class="n">doc_id</span><span class="p">)</span> <span class="k">for</span> <span class="n">doc_id</span><span class="p">,</span><span class="n">docvec</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">docvecs</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="p">]</span>
            <span class="n">scores</span>     <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">raw_scores</span><span class="p">,</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)[:</span><span class="n">kresults</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;QUERY /&#39;</span><span class="p">,</span><span class="n">query</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">])</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Max SCORE&#39;</span><span class="p">,</span><span class="n">scores</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">docset</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">scores</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>          
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Min SCORE&#39;</span><span class="p">,</span><span class="n">scores</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                <span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">docset</span><span class="p">),</span><span class="n">scores</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">docset</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">scores</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>    
                
            <span class="k">for</span> <span class="n">score</span><span class="p">,</span> <span class="n">doc_id</span> <span class="ow">in</span> <span class="n">scores</span><span class="p">:</span>
                <span class="n">run</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ScoredDoc</span><span class="p">(</span><span class="n">query</span><span class="p">[</span><span class="s1">&#39;query_id&#39;</span><span class="p">],</span><span class="n">doc_id</span><span class="p">,</span><span class="n">score</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">run</span>

    
    <span class="k">def</span> <span class="nf">supervised_query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">qidx</span><span class="p">,</span> <span class="n">queries</span><span class="p">,</span><span class="n">qrels</span><span class="p">):</span>
        
        <span class="n">queries</span> <span class="o">=</span> <span class="p">{</span><span class="n">query</span><span class="p">[</span><span class="s1">&#39;query_id&#39;</span><span class="p">]:</span><span class="n">query</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">query</span> <span class="ow">in</span> <span class="n">queries</span><span class="p">}</span>
        <span class="n">docs</span>    <span class="o">=</span> <span class="p">{</span><span class="n">doc</span><span class="p">[</span><span class="s1">&#39;doc_id&#39;</span><span class="p">]:</span><span class="n">doc</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">docset</span><span class="p">}</span>
        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span><span class="n">qrel</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">qrels</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">qrel</span><span class="o">.</span><span class="n">query_id</span> <span class="o">==</span> <span class="n">qidx</span><span class="p">:</span>
                <span class="n">doc_id</span> <span class="o">=</span> <span class="n">qrel</span><span class="o">.</span><span class="n">doc_id</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Query&#39;</span><span class="p">,</span><span class="n">qrel</span><span class="o">.</span><span class="n">query_id</span><span class="p">,</span><span class="n">queries</span><span class="p">[</span><span class="n">qrel</span><span class="o">.</span><span class="n">query_id</span><span class="p">])</span>
                <span class="n">qvec</span>       <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query2vec</span><span class="p">(</span><span class="n">queries</span><span class="p">[</span><span class="n">qrel</span><span class="o">.</span><span class="n">query_id</span><span class="p">])</span>
                <span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">qvec</span><span class="p">),</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">docvecs</span><span class="p">[</span><span class="n">doc_id</span><span class="p">]))</span>
                <span class="n">raw_score</span>  <span class="o">=</span> <span class="n">score_doc</span><span class="p">(</span><span class="n">qvec</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">docvecs</span><span class="p">[</span><span class="n">doc_id</span><span class="p">])</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  score&#39;</span><span class="p">,</span><span class="n">raw_score</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">docs</span><span class="p">[</span><span class="n">doc_id</span><span class="p">])</span>
                <span class="nb">print</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">search</span> <span class="o">=</span> <span class="n">IRModel</span><span class="p">(</span><span class="n">docset</span><span class="p">,</span><span class="n">use_svd</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">max_vocab_size</span><span class="o">=</span><span class="mi">5500</span><span class="p">,</span><span class="n">k</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Building vocabulary...
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>  Total vocabulary size 8354
  Vocabulary size 5500
Building term document matrix...
</pre></div>
</div>
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">KeyboardInterrupt</span><span class="g g-Whitespace">                         </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">10</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">search</span> <span class="o">=</span> <span class="n">IRModel</span><span class="p">(</span><span class="n">docset</span><span class="p">,</span><span class="n">use_svd</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">max_vocab_size</span><span class="o">=</span><span class="mi">5500</span><span class="p">,</span><span class="n">k</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>

<span class="nn">Cell In[9], line 14,</span> in <span class="ni">IRModel.__init__</span><span class="nt">(self, docset, use_tfidf, use_svd, max_vocab_size, k)</span>
<span class="g g-Whitespace">     </span><span class="mi">12</span> <span class="bp">self</span><span class="o">.</span><span class="n">vocabulary</span> <span class="o">=</span> <span class="n">index_vocab</span><span class="p">(</span><span class="n">vocab_list</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">13</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Building term document matrix...&#39;</span><span class="p">)</span>
<span class="ne">---&gt; </span><span class="mi">14</span> <span class="n">tdmat</span>           <span class="o">=</span> <span class="n">bow_TXD</span><span class="p">(</span><span class="n">docset</span><span class="p">,</span><span class="n">vocab_list</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">vocabulary</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">16</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_tfidf</span><span class="p">:</span>
<span class="g g-Whitespace">     </span><span class="mi">17</span>     <span class="bp">self</span><span class="o">.</span><span class="n">idfvec</span>     <span class="o">=</span> <span class="n">idfvec</span><span class="p">(</span><span class="n">tdmat</span><span class="p">)</span>

<span class="nn">Cell In[6], line 9,</span> in <span class="ni">bow_TXD</span><span class="nt">(docset, vocab_list, vocabulary)</span>
<span class="g g-Whitespace">      </span><span class="mi">6</span> <span class="n">TXD</span>    <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">mlines</span><span class="p">,</span><span class="n">ncols</span><span class="p">))</span>
<span class="g g-Whitespace">      </span><span class="mi">8</span> <span class="k">for</span> <span class="n">jdx</span><span class="p">,</span> <span class="n">doc</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">docset</span><span class="p">):</span>
<span class="ne">----&gt; </span><span class="mi">9</span>     <span class="n">text</span> <span class="o">=</span> <span class="n">preproc_doc</span><span class="p">(</span><span class="n">doc</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">])</span>
<span class="g g-Whitespace">     </span><span class="mi">10</span>     <span class="n">counts</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
<span class="g g-Whitespace">     </span><span class="mi">11</span>     <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">counts</span><span class="o">.</span><span class="n">elements</span><span class="p">():</span>

<span class="nn">Cell In[4], line 10,</span> in <span class="ni">preproc_doc</span><span class="nt">(text, lower)</span>
<span class="g g-Whitespace">      </span><span class="mi">8</span> <span class="k">def</span> <span class="nf">preproc_doc</span><span class="p">(</span><span class="n">text</span><span class="p">,</span><span class="n">lower</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="g g-Whitespace">      </span><span class="mi">9</span>     <span class="n">lemma_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="ne">---&gt; </span><span class="mi">10</span>     <span class="k">for</span> <span class="n">TOKEN</span> <span class="ow">in</span> <span class="n">tokenizer</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
<span class="g g-Whitespace">     </span><span class="mi">11</span>        <span class="n">lemma</span> <span class="o">=</span> <span class="n">TOKEN</span><span class="o">.</span><span class="n">lemma_</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">if</span> <span class="n">lower</span> <span class="k">else</span> <span class="n">TOKEN</span><span class="o">.</span><span class="n">lemma_</span> 
<span class="g g-Whitespace">     </span><span class="mi">12</span>        <span class="k">if</span> <span class="n">lemma</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">stopwords</span> <span class="ow">and</span> <span class="n">lemma</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">string</span><span class="o">.</span><span class="n">punctuation</span><span class="p">:</span> 

<span class="nn">File /Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/spacy/language.py:1049,</span> in <span class="ni">Language.__call__</span><span class="nt">(self, text, disable, component_cfg)</span>
<span class="g g-Whitespace">   </span><span class="mi">1047</span>     <span class="n">error_handler</span> <span class="o">=</span> <span class="n">proc</span><span class="o">.</span><span class="n">get_error_handler</span><span class="p">()</span>
<span class="g g-Whitespace">   </span><span class="mi">1048</span> <span class="k">try</span><span class="p">:</span>
<span class="ne">-&gt; </span><span class="mi">1049</span>     <span class="n">doc</span> <span class="o">=</span> <span class="n">proc</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="o">**</span><span class="n">component_cfg</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="p">{}))</span>  <span class="c1"># type: ignore[call-arg]</span>
<span class="g g-Whitespace">   </span><span class="mi">1050</span> <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">1051</span>     <span class="c1"># This typically happens if a component is not initialized</span>
<span class="g g-Whitespace">   </span><span class="mi">1052</span>     <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">Errors</span><span class="o">.</span><span class="n">E109</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">))</span> <span class="kn">from</span> <span class="nn">e</span>

<span class="nn">File /Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/spacy/pipeline/trainable_pipe.pyx:52,</span> in <span class="ni">spacy.pipeline.trainable_pipe.TrainablePipe.__call__</span><span class="nt">()</span>

<span class="nn">File /Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/spacy/pipeline/tok2vec.py:126,</span> in <span class="ni">Tok2Vec.predict</span><span class="nt">(self, docs)</span>
<span class="g g-Whitespace">    </span><span class="mi">124</span>     <span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">get_dim</span><span class="p">(</span><span class="s2">&quot;nO&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">125</span>     <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">alloc</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="n">width</span><span class="p">))</span> <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">docs</span><span class="p">]</span>
<span class="ne">--&gt; </span><span class="mi">126</span> <span class="n">tokvecs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">docs</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">127</span> <span class="k">return</span> <span class="n">tokvecs</span>

<span class="nn">File /Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/thinc/model.py:334,</span> in <span class="ni">Model.predict</span><span class="nt">(self, X)</span>
<span class="g g-Whitespace">    </span><span class="mi">330</span> <span class="k">def</span> <span class="nf">predict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">:</span> <span class="n">InT</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">OutT</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">331</span><span class="w">     </span><span class="sd">&quot;&quot;&quot;Call the model&#39;s `forward` function with `is_train=False`, and return</span>
<span class="g g-Whitespace">    </span><span class="mi">332</span><span class="sd">     only the output, instead of the `(output, callback)` tuple.</span>
<span class="g g-Whitespace">    </span><span class="mi">333</span><span class="sd">     &quot;&quot;&quot;</span>
<span class="ne">--&gt; </span><span class="mi">334</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">is_train</span><span class="o">=</span><span class="kc">False</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

<span class="nn">File /Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/thinc/layers/chain.py:54,</span> in <span class="ni">forward</span><span class="nt">(model, X, is_train)</span>
<span class="g g-Whitespace">     </span><span class="mi">52</span> <span class="n">callbacks</span> <span class="o">=</span> <span class="p">[]</span>
<span class="g g-Whitespace">     </span><span class="mi">53</span> <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">layers</span><span class="p">:</span>
<span class="ne">---&gt; </span><span class="mi">54</span>     <span class="n">Y</span><span class="p">,</span> <span class="n">inc_layer_grad</span> <span class="o">=</span> <span class="n">layer</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">is_train</span><span class="o">=</span><span class="n">is_train</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">55</span>     <span class="n">callbacks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">inc_layer_grad</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">56</span>     <span class="n">X</span> <span class="o">=</span> <span class="n">Y</span>

<span class="nn">File /Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/thinc/model.py:310,</span> in <span class="ni">Model.__call__</span><span class="nt">(self, X, is_train)</span>
<span class="g g-Whitespace">    </span><span class="mi">307</span> <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">:</span> <span class="n">InT</span><span class="p">,</span> <span class="n">is_train</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">OutT</span><span class="p">,</span> <span class="n">Callable</span><span class="p">]:</span>
<span class="g g-Whitespace">    </span><span class="mi">308</span><span class="w">     </span><span class="sd">&quot;&quot;&quot;Call the model&#39;s `forward` function, returning the output and a</span>
<span class="g g-Whitespace">    </span><span class="mi">309</span><span class="sd">     callback to compute the gradients via backpropagation.&quot;&quot;&quot;</span>
<span class="ne">--&gt; </span><span class="mi">310</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">is_train</span><span class="o">=</span><span class="n">is_train</span><span class="p">)</span>

<span class="nn">File /Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/thinc/layers/with_array.py:42,</span> in <span class="ni">forward</span><span class="nt">(model, Xseq, is_train)</span>
<span class="g g-Whitespace">     </span><span class="mi">40</span>     <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">layers</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">Xseq</span><span class="p">,</span> <span class="n">is_train</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">41</span> <span class="k">else</span><span class="p">:</span>
<span class="ne">---&gt; </span><span class="mi">42</span>     <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="n">Tuple</span><span class="p">[</span><span class="n">SeqT</span><span class="p">,</span> <span class="n">Callable</span><span class="p">],</span> <span class="n">_list_forward</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">Xseq</span><span class="p">,</span> <span class="n">is_train</span><span class="p">))</span>

<span class="nn">File /Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/thinc/layers/with_array.py:77,</span> in <span class="ni">_list_forward</span><span class="nt">(model, Xs, is_train)</span>
<span class="g g-Whitespace">     </span><span class="mi">75</span> <span class="n">lengths</span> <span class="o">=</span> <span class="n">NUMPY_OPS</span><span class="o">.</span><span class="n">asarray1i</span><span class="p">([</span><span class="nb">len</span><span class="p">(</span><span class="n">seq</span><span class="p">)</span> <span class="k">for</span> <span class="n">seq</span> <span class="ow">in</span> <span class="n">Xs</span><span class="p">])</span>
<span class="g g-Whitespace">     </span><span class="mi">76</span> <span class="n">Xf</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="n">Xs</span><span class="p">,</span> <span class="n">pad</span><span class="o">=</span><span class="n">pad</span><span class="p">)</span>
<span class="ne">---&gt; </span><span class="mi">77</span> <span class="n">Yf</span><span class="p">,</span> <span class="n">get_dXf</span> <span class="o">=</span> <span class="n">layer</span><span class="p">(</span><span class="n">Xf</span><span class="p">,</span> <span class="n">is_train</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">79</span> <span class="k">def</span> <span class="nf">backprop</span><span class="p">(</span><span class="n">dYs</span><span class="p">:</span> <span class="n">ListXd</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ListXd</span><span class="p">:</span>
<span class="g g-Whitespace">     </span><span class="mi">80</span>     <span class="n">dYf</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="n">dYs</span><span class="p">,</span> <span class="n">pad</span><span class="o">=</span><span class="n">pad</span><span class="p">)</span>

<span class="nn">File /Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/thinc/model.py:310,</span> in <span class="ni">Model.__call__</span><span class="nt">(self, X, is_train)</span>
<span class="g g-Whitespace">    </span><span class="mi">307</span> <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">:</span> <span class="n">InT</span><span class="p">,</span> <span class="n">is_train</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">OutT</span><span class="p">,</span> <span class="n">Callable</span><span class="p">]:</span>
<span class="g g-Whitespace">    </span><span class="mi">308</span><span class="w">     </span><span class="sd">&quot;&quot;&quot;Call the model&#39;s `forward` function, returning the output and a</span>
<span class="g g-Whitespace">    </span><span class="mi">309</span><span class="sd">     callback to compute the gradients via backpropagation.&quot;&quot;&quot;</span>
<span class="ne">--&gt; </span><span class="mi">310</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">is_train</span><span class="o">=</span><span class="n">is_train</span><span class="p">)</span>

<span class="nn">File /Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/thinc/layers/chain.py:54,</span> in <span class="ni">forward</span><span class="nt">(model, X, is_train)</span>
<span class="g g-Whitespace">     </span><span class="mi">52</span> <span class="n">callbacks</span> <span class="o">=</span> <span class="p">[]</span>
<span class="g g-Whitespace">     </span><span class="mi">53</span> <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">layers</span><span class="p">:</span>
<span class="ne">---&gt; </span><span class="mi">54</span>     <span class="n">Y</span><span class="p">,</span> <span class="n">inc_layer_grad</span> <span class="o">=</span> <span class="n">layer</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">is_train</span><span class="o">=</span><span class="n">is_train</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">55</span>     <span class="n">callbacks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">inc_layer_grad</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">56</span>     <span class="n">X</span> <span class="o">=</span> <span class="n">Y</span>

<span class="nn">File /Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/thinc/model.py:310,</span> in <span class="ni">Model.__call__</span><span class="nt">(self, X, is_train)</span>
<span class="g g-Whitespace">    </span><span class="mi">307</span> <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">:</span> <span class="n">InT</span><span class="p">,</span> <span class="n">is_train</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">OutT</span><span class="p">,</span> <span class="n">Callable</span><span class="p">]:</span>
<span class="g g-Whitespace">    </span><span class="mi">308</span><span class="w">     </span><span class="sd">&quot;&quot;&quot;Call the model&#39;s `forward` function, returning the output and a</span>
<span class="g g-Whitespace">    </span><span class="mi">309</span><span class="sd">     callback to compute the gradients via backpropagation.&quot;&quot;&quot;</span>
<span class="ne">--&gt; </span><span class="mi">310</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">is_train</span><span class="o">=</span><span class="n">is_train</span><span class="p">)</span>

<span class="nn">File /Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/thinc/layers/residual.py:41,</span> in <span class="ni">forward</span><span class="nt">(model, X, is_train)</span>
<span class="g g-Whitespace">     </span><span class="mi">38</span>     <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">     </span><span class="mi">39</span>         <span class="k">return</span> <span class="n">d_output</span> <span class="o">+</span> <span class="n">dX</span>
<span class="ne">---&gt; </span><span class="mi">41</span> <span class="n">Y</span><span class="p">,</span> <span class="n">backprop_layer</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">layers</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">X</span><span class="p">,</span> <span class="n">is_train</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">42</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
<span class="g g-Whitespace">     </span><span class="mi">43</span>     <span class="k">return</span> <span class="p">[</span><span class="n">X</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">Y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">X</span><span class="p">))],</span> <span class="n">backprop</span>

<span class="nn">File /Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/thinc/model.py:310,</span> in <span class="ni">Model.__call__</span><span class="nt">(self, X, is_train)</span>
<span class="g g-Whitespace">    </span><span class="mi">307</span> <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">:</span> <span class="n">InT</span><span class="p">,</span> <span class="n">is_train</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">OutT</span><span class="p">,</span> <span class="n">Callable</span><span class="p">]:</span>
<span class="g g-Whitespace">    </span><span class="mi">308</span><span class="w">     </span><span class="sd">&quot;&quot;&quot;Call the model&#39;s `forward` function, returning the output and a</span>
<span class="g g-Whitespace">    </span><span class="mi">309</span><span class="sd">     callback to compute the gradients via backpropagation.&quot;&quot;&quot;</span>
<span class="ne">--&gt; </span><span class="mi">310</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">is_train</span><span class="o">=</span><span class="n">is_train</span><span class="p">)</span>

<span class="nn">File /Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/thinc/layers/chain.py:54,</span> in <span class="ni">forward</span><span class="nt">(model, X, is_train)</span>
<span class="g g-Whitespace">     </span><span class="mi">52</span> <span class="n">callbacks</span> <span class="o">=</span> <span class="p">[]</span>
<span class="g g-Whitespace">     </span><span class="mi">53</span> <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">layers</span><span class="p">:</span>
<span class="ne">---&gt; </span><span class="mi">54</span>     <span class="n">Y</span><span class="p">,</span> <span class="n">inc_layer_grad</span> <span class="o">=</span> <span class="n">layer</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">is_train</span><span class="o">=</span><span class="n">is_train</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">55</span>     <span class="n">callbacks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">inc_layer_grad</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">56</span>     <span class="n">X</span> <span class="o">=</span> <span class="n">Y</span>

<span class="nn">File /Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/thinc/model.py:310,</span> in <span class="ni">Model.__call__</span><span class="nt">(self, X, is_train)</span>
<span class="g g-Whitespace">    </span><span class="mi">307</span> <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">:</span> <span class="n">InT</span><span class="p">,</span> <span class="n">is_train</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">OutT</span><span class="p">,</span> <span class="n">Callable</span><span class="p">]:</span>
<span class="g g-Whitespace">    </span><span class="mi">308</span><span class="w">     </span><span class="sd">&quot;&quot;&quot;Call the model&#39;s `forward` function, returning the output and a</span>
<span class="g g-Whitespace">    </span><span class="mi">309</span><span class="sd">     callback to compute the gradients via backpropagation.&quot;&quot;&quot;</span>
<span class="ne">--&gt; </span><span class="mi">310</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">is_train</span><span class="o">=</span><span class="n">is_train</span><span class="p">)</span>

<span class="nn">File /Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/thinc/layers/chain.py:54,</span> in <span class="ni">forward</span><span class="nt">(model, X, is_train)</span>
<span class="g g-Whitespace">     </span><span class="mi">52</span> <span class="n">callbacks</span> <span class="o">=</span> <span class="p">[]</span>
<span class="g g-Whitespace">     </span><span class="mi">53</span> <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">layers</span><span class="p">:</span>
<span class="ne">---&gt; </span><span class="mi">54</span>     <span class="n">Y</span><span class="p">,</span> <span class="n">inc_layer_grad</span> <span class="o">=</span> <span class="n">layer</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">is_train</span><span class="o">=</span><span class="n">is_train</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">55</span>     <span class="n">callbacks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">inc_layer_grad</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">56</span>     <span class="n">X</span> <span class="o">=</span> <span class="n">Y</span>

    <span class="p">[</span><span class="o">...</span> <span class="n">skipping</span> <span class="n">similar</span> <span class="n">frames</span><span class="p">:</span> <span class="n">Model</span><span class="o">.</span><span class="fm">__call__</span> <span class="n">at</span> <span class="n">line</span> <span class="mi">310</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)]</span>

<span class="nn">File /Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/thinc/layers/chain.py:54,</span> in <span class="ni">forward</span><span class="nt">(model, X, is_train)</span>
<span class="g g-Whitespace">     </span><span class="mi">52</span> <span class="n">callbacks</span> <span class="o">=</span> <span class="p">[]</span>
<span class="g g-Whitespace">     </span><span class="mi">53</span> <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">layers</span><span class="p">:</span>
<span class="ne">---&gt; </span><span class="mi">54</span>     <span class="n">Y</span><span class="p">,</span> <span class="n">inc_layer_grad</span> <span class="o">=</span> <span class="n">layer</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">is_train</span><span class="o">=</span><span class="n">is_train</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">55</span>     <span class="n">callbacks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">inc_layer_grad</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">56</span>     <span class="n">X</span> <span class="o">=</span> <span class="n">Y</span>

<span class="nn">File /Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/thinc/model.py:310,</span> in <span class="ni">Model.__call__</span><span class="nt">(self, X, is_train)</span>
<span class="g g-Whitespace">    </span><span class="mi">307</span> <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">:</span> <span class="n">InT</span><span class="p">,</span> <span class="n">is_train</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">OutT</span><span class="p">,</span> <span class="n">Callable</span><span class="p">]:</span>
<span class="g g-Whitespace">    </span><span class="mi">308</span><span class="w">     </span><span class="sd">&quot;&quot;&quot;Call the model&#39;s `forward` function, returning the output and a</span>
<span class="g g-Whitespace">    </span><span class="mi">309</span><span class="sd">     callback to compute the gradients via backpropagation.&quot;&quot;&quot;</span>
<span class="ne">--&gt; </span><span class="mi">310</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">is_train</span><span class="o">=</span><span class="n">is_train</span><span class="p">)</span>

<span class="nn">File /Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/thinc/layers/maxout.py:52,</span> in <span class="ni">forward</span><span class="nt">(model, X, is_train)</span>
<span class="g g-Whitespace">     </span><span class="mi">50</span> <span class="n">W</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">get_param</span><span class="p">(</span><span class="s2">&quot;W&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">51</span> <span class="n">W</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">reshape2f</span><span class="p">(</span><span class="n">W</span><span class="p">,</span> <span class="n">nO</span> <span class="o">*</span> <span class="n">nP</span><span class="p">,</span> <span class="n">nI</span><span class="p">)</span>
<span class="ne">---&gt; </span><span class="mi">52</span> <span class="n">Y</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">gemm</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">W</span><span class="p">,</span> <span class="n">trans2</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">53</span> <span class="n">Y</span> <span class="o">+=</span> <span class="n">model</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">reshape1f</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">nO</span> <span class="o">*</span> <span class="n">nP</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">54</span> <span class="n">Z</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">reshape3f</span><span class="p">(</span><span class="n">Y</span><span class="p">,</span> <span class="n">Y</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">nO</span><span class="p">,</span> <span class="n">nP</span><span class="p">)</span>

<span class="ne">KeyboardInterrupt</span>: 
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ir_measures</span> <span class="kn">import</span> <span class="n">Qrel</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;cisi_qrels.json&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">qrels</span><span class="p">:</span>
    <span class="n">all_qrels</span> <span class="o">=</span> <span class="p">[</span><span class="n">Qrel</span><span class="p">(</span><span class="n">QREL</span><span class="p">[</span><span class="s1">&#39;query_id&#39;</span><span class="p">],</span><span class="n">QREL</span><span class="p">[</span><span class="s1">&#39;doc_id&#39;</span><span class="p">],</span><span class="n">QREL</span><span class="p">[</span><span class="s1">&#39;relevance&#39;</span><span class="p">])</span> <span class="k">for</span> <span class="n">QREL</span> <span class="ow">in</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">qrels</span><span class="o">.</span><span class="n">read</span><span class="p">())]</span>

<span class="n">search</span><span class="o">.</span><span class="n">supervised_query</span><span class="p">(</span><span class="s1">&#39;5&#39;</span><span class="p">,</span><span class="n">queries</span><span class="p">,</span><span class="n">all_qrels</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Query 5 What special training will ordinary researchers and businessmen need for proper information management and unobstructed use of information retrieval systems? What problems are they likely to encounter?
5500 5500
  score 0.01316970975300814
  A comparison of creative and &quot;noncreative&quot; research chemists with respect to the ways in which they use their professional and technical literature.. The creative chemists differ from the &quot;noncreative&quot; in that the former read more technical literature on the job, are less reluctant to use literature of greater reading difficulty, are less influenced in their independence of thought, read more extensively and consult more frequently the older material, are more inquisitive and have broader cultural interests.. The findings of the study are believed to be helpful in planning library and information services, in refining future inquiries into the ways in which scientists use recorded information, and in improving tests for the identification of creative ability among chemists..

Query 5 What special training will ordinary researchers and businessmen need for proper information management and unobstructed use of information retrieval systems? What problems are they likely to encounter?
5500 5500
  score 0.0
  The philosophy, production, and cost-effectiveness of a computer-generated library catalog is described. This catalog is unique in that it utilizes direct computer to microfilm composition techniques, employing the Stromberg Carlson 4020. Cost, user acceptance, and by-product capabilities are stressed.

Query 5 What special training will ordinary researchers and businessmen need for proper information management and unobstructed use of information retrieval systems? What problems are they likely to encounter?
5500 5500
  score 0.0905413479761995
  The paper is a report of most of the major findings of a study in searching the periodical eye research literature.. Questions were collected from eye researchers and a selected group of these were searched in nine different secondary sources.. Articles thought to be relevant were Xeroxed and sent to the eye researchers who subsequently rated the articles.. Articles of eye research interest are found in a wide variety of journals, but a small number of journals carry a large proportion of the articles judged valuable by the eye researchers.. Approximately a fourth of eye research articles are in foreign languages.. Translations are not readily available.. Despite a delay of more than 15 month between the original appearance of article in journals and the mailing of photocopies, about half of the articles of interest to the researchers were not known to them previously.. For extensive retrospective searches more than one secondary service must be used.. Index Medicus and Excerpta Medica (Section 12) or Ophthalmic Literature would be good sources.. MEDLARS demand searches were not shown to be clearly superior to manual searches of Index Medicus.. Titles, abstracts, and full text were shown to be equally effective in permitting searches to retrieve references that were subsequently rated as relevant by the researchers.. A searcher with a background in ophthalmology was able to retrieve more articles of research interest than other non-ophthalmologist searchers..

Query 5 What special training will ordinary researchers and businessmen need for proper information management and unobstructed use of information retrieval systems? What problems are they likely to encounter?
5500 5500
  score 0.07239693201116319
  This book is intended to supply the background needed for participation in the analysis and design of information-handling systems and for understanding the literature in the field. I have tried to present a unified approach to the subject and to the relation of information retrieval to other disciplines and an appreciation of the importance of this interdisciplinary relationship. I hope that the scientist or computer programmer, newly interested in information-retrieval problems, as well as the librarian, will find the book of value.

Query 5 What special training will ordinary researchers and businessmen need for proper information management and unobstructed use of information retrieval systems? What problems are they likely to encounter?
5500 5500
  score 0.008573818976046284
  The digital computer has been used as a problem-solving tool for only two decades. During most of this time, computer scientists have concentrated on learning how to build the tool: applying electronic technology, arranging for data flow between components, and manufacturing the hardware. Now we are entering a new stage in which computing power is made available through interactive terminals to people who are not computer scientists. This is possible on a large scale only because design and marketing innovators now have confidence in their ability to provide reliable, cost-effective service to less sophisticated users. In this new stage, the natural behavior patterns of users become an important element in the design of the interface to the tool.

Query 5 What special training will ordinary researchers and businessmen need for proper information management and unobstructed use of information retrieval systems? What problems are they likely to encounter?
5500 5500
  score 0.075136607018999
  Information science meets behavioral science in the study of information needs and uses. At first, the meeting of these fields was inconclusive. Until the mid-1960&#39;s, there were only a few substantial studies of information needs and uses. Since about 1963, however, a significant literature has grown rapidly. There is evidence now of a productive entente between the fields. When information scientists see reliable, valid, and nontrivial data on users&#39; behavior, they begin to use behavioral criteria in evaluating information system performance. When behavioral scientists glimpse the full complexity of dissemination, documentation, storage, and retrieval processes, they offer fewer naive solutions to &quot;the information problem.&quot; This mutual education and accommodation will undoubtedly continue. Information science and behavioral science need each other. Big Science needs them both.

Query 5 What special training will ordinary researchers and businessmen need for proper information management and unobstructed use of information retrieval systems? What problems are they likely to encounter?
5500 5500
  score 0.005966033627623708
  An investigation of the manpower requirements of health sciences libraries and of educational programs appropriate to these manpower needs was begun in March 1968.. To data, 4,727 libraries have been identified as being used by 14,000 health sciences institutions and programs.. Of this total, 2,628 are hospital libraries; 1,328 are health sciences libraries; and 771 are academic or public libraries.. Within these libraries some 14,938 persons are directly involved, either full- or part-time, in the delivery of health sciences library services.. Of the total work force, 5,861 persons are employed in hospital libraries and 9,077 are employed in health sciences libraries and collections.. The ratio between professional and nonprofessional employees is 1:2; professional and nonprofessional status was assigned by the chief librarian.. Survey data indicate a 7 percent manpower shortage in positions classified as professional, and a 3 percent shortage in positions classified as nonprofessional..

Query 5 What special training will ordinary researchers and businessmen need for proper information management and unobstructed use of information retrieval systems? What problems are they likely to encounter?
5500 5500
  score 0.0
  A statistical description based on a mail survey of personnel in 2,099 health sciences libraries located outside of the hospital setting is reported.. Respondents to the survey were divided into three groups: professionals (those possessing a graduate library degree); nonprofessionals (those not possessing graduate library degree); and chief librarians (those responsible for a library&#39;s operations).. Survey items dealt with education, sex, age, salary, job mobility and preference for continuing education programs.. Some 60 percent of the respondents were professionals; 40 percent were nonprofessionals.. Seven hundred and twenty-eight chief librarians were identified in the population: 57 percent were professional librarians while the remainder were without a graduate library degree.. Approximately 1/5 of all survey respondents were men.. The age distribution for the work force tended to be bimodal, reflecting the career patterns of women and the later entry of men into librarianship.. The annual salary for male professionals was calculated at $12,732; for female professionals at $10,044; for male nonprofessionals at $7,878; and for female nonprofessionals at $6,313.. Male professionals were found to have the highest rates of job and geographic mobility.. Conversely, female nonprofessionals were lowest in mobility.. In expressing a preference for continuing education programs in library science, professionals tended to request courses dealing with the organization of libraries, health sciences institutions and their relationships, while nonprofessionals inclined towards courses in technical processing..

Query 5 What special training will ordinary researchers and businessmen need for proper information management and unobstructed use of information retrieval systems? What problems are they likely to encounter?
5500 5500
  score 0.0
  ***MEDLEARN***, an orientation to MEDLINE, was developed to educate members of the biomedical community to become competent on-line searchers.. It appears in two complementary forms: an interactive terminal presentation available on the TYMSHARE Network and a supporting hard-copy manual which contains the didactic portions of the computer program as well as additional items which are not suitable for on-line presentation.. ***MEDLEARN***, a flexible instruction tool, is divided into forty sections which may be selected in various sequences depending on the user&#39;s previous experience.. Two MEDLINE simulations and feedback sections after practice on MEDLINE provide motivation for continued learning.. The orientation program was evaluated at several medical centers with uniformly favorable results..

Query 5 What special training will ordinary researchers and businessmen need for proper information management and unobstructed use of information retrieval systems? What problems are they likely to encounter?
5500 5500
  score 0.05672647650720004
  This guide is a recapitulation and refinement of the substantive content of a one-and-a-half day course which was given before three groups of Federal scientists and engineers during the Fall of 1967. Its purpose was to train and inform working scientists and engineers as to the most direct and efficient means of seeking and acquiring work-related information. The impetus for the course was the recognition of the growing need for working scientists and engineers to share and participate in the existing and emerging information tools and mechanisms, and to avail themselves of the opportunities afforded by the newer approaches to information collection, organization, and dissemination. A further, related purpose of the course was to facilitate the fullest possible participation of the working scientist and engineer in the evolution of information services and mechanisms which are likely to have a greater and greater effect on his professional activities.

Query 5 What special training will ordinary researchers and businessmen need for proper information management and unobstructed use of information retrieval systems? What problems are they likely to encounter?
5500 5500
  score 0.01098338626297627
  This report and its recommendations are in response to the Commission&#39;s request for &quot;a nationwide program of continuing education for personnel in the library and information science field.&quot; While it is offered as only the start of an on-going process of developing a nationwide program, its recommendations are the result of an intensive nine-month project, involving hundreds of persons in the library and information science fields. Many of these persons participated in mini-charettes, in a written survey, or in personal interviews which addressed major issues such as: certification; organizational and individual incentives for continuing education; educational methods; and continuing education needs. The contribution of these library personnel cannot be overstated. Their collective wisdom and perspective have led the Project team to many of its major recommendations. However, as would be expected when such a large number of people are involved, there were differences of opinion, even as there are many differences of opinion reflected in the literature of continuing education emanating from the various professions. In the present study, most of these differences related to the input into and control over the policies of the national structure. Three alternative models which have been considered are outlined in Appendix D; alternatives to several specific features of the recommended model are presented at the end of Chapter 4. Throughout the text, when issues are presented on which there is uncertainty because of the intensity of opinions expressed, these areas are identified.

Query 5 What special training will ordinary researchers and businessmen need for proper information management and unobstructed use of information retrieval systems? What problems are they likely to encounter?
5500 5500
  score 0.024671164392256553
  Educating the Library User is a collection of original essays, case studies, and research reports on the problems, hopes, and techniques of instructing library users and nonusers, from the kindergartener to the preschool adult, in the effective use of libraries and their resources. Merging the library-use teachings of school, public, and academic libraries, this book demonstrates the need for a consistent, sequential plan of library-use instruction that crosses traditional library boundaries.

Query 5 What special training will ordinary researchers and businessmen need for proper information management and unobstructed use of information retrieval systems? What problems are they likely to encounter?
5500 5500
  score 0.007162359910075183
  Communication technology has entered a period of revolutionary change. The last decade has brought new inventions of enormous potential. It will probably be two decades before we fully grasp the shattering effect they will have on society. These inventions include: The communication satellite. Suddenly this has provided telephone and television links to the underdeveloped world. Much larger satellites will be built and will have an enormous impact on education and communications both in the United States and throughout the world. The satellite antennae in some underdeveloped countries stand next to fields ploughed by oxen. The helical waveguide. A pipe, now operating, that can carry 250,000 simultaneous telephone calls or equivalent information over long distances. The laser. This means of transmission, still in the research laboratory, has the potential of carrying many millions of simultaneous telephone calls or their equivalent. Large-scale integration (LSI). A form of ultraminiaturized computer circuitry that probably marks the beginning of mass production of computers and computerlike logic circuitry. It offers the potential of extremely reliable, extremely small, and, in some of its forms, extremely fast computers. If large-enough quantities can be built, this circuitry can become very low in cost. On-line real-time computers. Computers capable of responding to many distant terminals on telecommunication lines at a speed geared to human thinking. They have the potential of bringing the power and information of innumerable computers into every office and eventually every home. Picturephone. A public dial-up telephone system in which subscribers see as well as hear each other. Large TV screens. TV screens that can occupy a whole wall if necessary. Cable TV. Provides a cable into homes with a potential signal-carrying capacity more than one thousand times that of the telephone cable. It could be used for signals other than television. Voice answerback. Computers can now assembly human-voice words and speak them over the telephone. This fact, coupled with the Touchtone telephone set, makes every such telephone a potential computer terminal. Millimeter-wave radio. Radio at frequencies in the band above the microwave band can relay a quantity of information greater than all the other radio bands combined. Chains of closely spaced antennas will distribute these millimeter-wave signals. Pulse code modulation. All signals, including telephone, Picturephone, music, facsimile, and television can be converted into digital bit stream and transmitted, along with computer data, over the same digital links. Major advantages accrue from this. Computerized switching. Computerized telephone exchanges are coming into operation, and computer-like logic can be employed for switching and &quot;concentrating&quot; all types of signals. Data banks. Electronic storage for huge quantities of information that can be manipulated and indexed by computers and that can be accessed in a fraction of a second.

Query 5 What special training will ordinary researchers and businessmen need for proper information management and unobstructed use of information retrieval systems? What problems are they likely to encounter?
5500 5500
  score 0.13358523808731912
  In a large mechanized retrieval system, a certain proportion of the search failures are likely to be directly attributable to inadequate user-system interaction.. Request statements may be only distant approximations of actual information requirements.. This paper discusses some of the problems of the user-system interface and suggests methods whereby these problems may be alleviated..

Query 5 What special training will ordinary researchers and businessmen need for proper information management and unobstructed use of information retrieval systems? What problems are they likely to encounter?
5500 5500
  score 0.025605389935549557
  The primary purpose of this study is to estimate the supply of, and above all the demand for, scientific and technical information; its secondary objective is to make a long-term assessment of qualitative and quantitative requirements for information specialists. In both instances, of course, future technical developments, as far as they can be foreseen, must be taken into account. At the same time, like most work sponsored by the OECD, its aim is to identify significant criteria for defining a policy - in this case an information policy, which is greatly needed in all OECD countries.

Query 5 What special training will ordinary researchers and businessmen need for proper information management and unobstructed use of information retrieval systems? What problems are they likely to encounter?
5500 5500
  score 0.06079998899107796
  This textbook grew out of some discussions between the authors about the interdisciplinary character of the field of information storage and retrieval. We both felt that the need existed to show what each professional group concerned with the solution of information storage and retrieval problems could contribute. A university-level course was developed, based on the concept that each person should be made aware of how others could help him. The course was presented about a dozen times over the ensuing years, and this book is based on it.

Query 5 What special training will ordinary researchers and businessmen need for proper information management and unobstructed use of information retrieval systems? What problems are they likely to encounter?
5500 5500
  score 0.04136273424082924
  The personal literature search of a scientist is strongly governed by subjective influences.. If he delegates his literature search he should always be aware of the problems necessarily emanating from his subjective view.. This prevents him from imposing unsatisfiable demands on the delegated search, particularly with respect to its expected performance, and makes him conscious of the fact that in order to satisfy his entire information need he cannot dispense with the browsing serendipity of his personal literature search.. He will also better understand the peculiarities of the documentary methods needed for operating large and continuously growing systems as compared with the methods sufficient for his personal file.. The information scientist on the other hand, in charge of establishing, operating, and evaluating retrieval systems of high performance and survival power, should take into consideration the pronouncedly subjective character of fundamental notions such as &quot;information&quot; and &quot;order&quot;.. This gives him a better understanding of the kind of inquiries submitted to him and of the inherently, even if latently, subjective character of several fundamental operations in storage and retrieval and will cause him to refrain from futile attempts to make such operations more &quot;objective&quot; and formal.. Such a better mutual understanding will be bound to promote advance in methodology and psychology of scientific communication..

Query 5 What special training will ordinary researchers and businessmen need for proper information management and unobstructed use of information retrieval systems? What problems are they likely to encounter?
5500 5500
  score 0.0567071351752334
  LEADERMART is a fully operational information retrieval system featuring on-line interactive service to a wide variety of user groups in business, industry, government, and universities.. With the availability of many computer-readable bibliographic data bases, experience with users dictated the development of special-purpose information products based on a thorough understanding of individual client needs, and the delivery of such products in a customized form.. Each different application required a different package, with variations of both software and data base coverage.. These packages were developed via suitable modification of modular system software to result in products tailored to user idiosyncracies.. The paper describes problems associated with these repackaging procedures, and discusses the changes brought about by the introduction of an on-line, interactive retrieval service into the operating environment of users.. Implications for networking and resource-sharing, focusing upon cost-effectiveness and performance measures, are also discussed..

Query 5 What special training will ordinary researchers and businessmen need for proper information management and unobstructed use of information retrieval systems? What problems are they likely to encounter?
5500 5500
  score 0.027876271161868037
  On-line interactive searching of several information bases through several service operators was introduced in an industrial research environment.. Thorough knowledge of the information base and its structure in the search system is a major factor of successful searching, and differences among search systems do not present serious barriers.. This new technique was most effectively used when the information specialist and the scientist searched as a team.. On-line searching is now an established search tool at Exxon Research and Engineering Company..

Query 5 What special training will ordinary researchers and businessmen need for proper information management and unobstructed use of information retrieval systems? What problems are they likely to encounter?
5500 5500
  score 0.05390935513679243
  The early 1970&#39;s have clearly shown a trend toward the use of on-line systems as the ideal medium for information retrieval.. The emphasis placed on direct access by the practitioners in the field, rather than delegated searches through information specialists, leads to the growing need for an efficient design in training transient user groups.. Printed manuals, live help, audiovisual presentations and on-line instructions have all been used with varying degrees of success.. The author contends that the use of computer-assisted instruction in conjunction with the on-line information retrieval system is the most promising form of instruction in that the medium itself, as well as the message may be used to acquaint the novice searcher with an interactive user/system interface..

Query 5 What special training will ordinary researchers and businessmen need for proper information management and unobstructed use of information retrieval systems? What problems are they likely to encounter?
5500 5500
  score 0.04339176403639469
  The objective of the Computer Search Center (CSC) of the Information Sciences section of IIT Research Institute (IITRI) is to provide a link between a wide variety of users and the rapidly expanding information resources in machine- readable form. Because none of the available computer search programs met the criteria of the center, and because of the need to handle a variety of data bases, new general purpose computer programs were written, and a tape format was developed so that a wide variety of data bases can be searched by the same computer program. The center was designed to provide current awareness and retrospective search services from both document-type and data-type computerized data files. The desire to develop transferable programs for use at many installations prompted the adoption of the machine-independent compiler language PL/1 and the use of IBM 360 series computers. The objective of education and training led to the development of a &quot;Search Manual&quot; for profile preparation, the development of a workbook in &quot;Modern Techniques in Chemical Information,&quot; the teaching of a new academic course, and the presentation of seminars.

Query 5 What special training will ordinary researchers and businessmen need for proper information management and unobstructed use of information retrieval systems? What problems are they likely to encounter?
5500 5500
  score 0.03044485167630256
  This book is an introduction to the elements, methods, and problems of interactive systems and is tutorial in tone. It is intended for both users and designers of conversational systems: those who actually operate them as well as those who design the overall systems in which they are used. I would expect, primarily, to draw my readers from among the designers of information systems and such prospective users as teachers, writers, librarians, lawyers, design engineers, and professional managers. The book is a survey and is not intended as an exhaustive text. The reader wishing to pursue any topic in detail will have to seek further, but I have provided references to help him do so.

Query 5 What special training will ordinary researchers and businessmen need for proper information management and unobstructed use of information retrieval systems? What problems are they likely to encounter?
5500 5500
  score 0.049601604480090794
  DEFINITION: What is &#39;reader instruction&#39;? Another currently used term is &#39;library instruction&#39;, which puts the emphasis on the library rather than the reader, and which also suggests to some that library instruction concerns the training of librarians. For the purpose of this introductory handbook &#39;reader instruction&#39; is taken to mean instruction given to readers to help them make the best use of a library, particularly an academic library of some size and complexity.

Query 5 What special training will ordinary researchers and businessmen need for proper information management and unobstructed use of information retrieval systems? What problems are they likely to encounter?
5500 5500
  score 0.013974388648329497
  To take advantage of computerized data bases to improve their services to scientists without incurring prohibitive in-house expense, the librarians at the Boulder Laboratories have campaigned to increase awareness and utilization via personal interviews, seminars, surveys, and critiques. Data bases most studied were DDC, NASA, SIE, ASCA, and the University of Georgia. The conclusions: 1) The scientist needs continuous personal assistance by a librarian or information specialist in order to make effective use of data bases. 2) As local retailer, the librarian has an accordingly important role to play now and in the future, a role at present generally ignored.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ir_measures</span>
<span class="kn">from</span> <span class="nn">ir_measures</span> <span class="kn">import</span> <span class="n">ScoredDoc</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">R</span><span class="p">,</span> <span class="n">nDCG</span>


<span class="c1">#expect ~40 with P@5 and nDCG</span>

<span class="n">run</span> <span class="o">=</span> <span class="n">search</span><span class="o">.</span><span class="n">make_run</span><span class="p">(</span><span class="n">queries</span><span class="p">,</span><span class="n">kresults</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="n">evaluation</span> <span class="o">=</span> <span class="n">ir_measures</span><span class="o">.</span><span class="n">calc_aggregate</span><span class="p">([</span><span class="n">nDCG</span><span class="o">@</span><span class="mi">20</span><span class="p">,</span> <span class="n">P</span><span class="o">@</span><span class="mi">20</span><span class="p">,</span> <span class="n">R</span><span class="o">@</span><span class="mi">20</span> <span class="p">],</span> <span class="n">all_qrels</span><span class="p">,</span> <span class="n">run</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Global evaluation&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39; | &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>  <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s1">:</span><span class="si">{</span><span class="n">val</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">evaluation</span><span class="o">.</span><span class="n">items</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="o">*</span><span class="mi">80</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>

<span class="k">for</span> <span class="n">metric</span> <span class="ow">in</span> <span class="n">ir_measures</span><span class="o">.</span><span class="n">iter_calc</span><span class="p">(</span> <span class="p">[</span><span class="n">nDCG</span><span class="o">@</span><span class="mi">5</span><span class="p">,</span> <span class="n">P</span><span class="o">@</span><span class="mi">5</span><span class="p">,</span> <span class="n">R</span><span class="o">@</span><span class="mi">5</span> <span class="p">],</span> <span class="n">all_qrels</span><span class="p">,</span> <span class="n">run</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;query id = </span><span class="si">{</span><span class="n">metric</span><span class="o">.</span><span class="n">query_id</span><span class="si">}</span><span class="s1">| measure = </span><span class="si">{</span><span class="n">metric</span><span class="o">.</span><span class="n">measure</span><span class="si">}</span><span class="s1">| value = </span><span class="si">{</span><span class="n">metric</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Global evaluation
R@20:0.18269132762816245 | nDCG@20:0.32431975510168626 | P@20:0.25131578947368427
================================================================================

query id = 1| measure = P@5| value = 1.0
query id = 1| measure = R@5| value = 0.10869565217391304
query id = 1| measure = nDCG@5| value = 1.0
query id = 2| measure = P@5| value = 0.0
query id = 2| measure = R@5| value = 0.0
query id = 2| measure = nDCG@5| value = 0.0
query id = 3| measure = P@5| value = 1.0
query id = 3| measure = R@5| value = 0.11363636363636363
query id = 3| measure = nDCG@5| value = 1.0
query id = 4| measure = P@5| value = 0.0
query id = 4| measure = R@5| value = 0.0
query id = 4| measure = nDCG@5| value = 0.0
query id = 5| measure = P@5| value = 0.0
query id = 5| measure = R@5| value = 0.0
query id = 5| measure = nDCG@5| value = 0.0
query id = 6| measure = P@5| value = 0.0
query id = 6| measure = R@5| value = 0.0
query id = 6| measure = nDCG@5| value = 0.0
query id = 7| measure = P@5| value = 0.0
query id = 7| measure = R@5| value = 0.0
query id = 7| measure = nDCG@5| value = 0.0
query id = 8| measure = P@5| value = 0.0
query id = 8| measure = R@5| value = 0.0
query id = 8| measure = nDCG@5| value = 0.0
query id = 9| measure = P@5| value = 0.4
query id = 9| measure = R@5| value = 0.058823529411764705
query id = 9| measure = nDCG@5| value = 0.4703652827859579
query id = 10| measure = P@5| value = 0.4
query id = 10| measure = R@5| value = 0.07692307692307693
query id = 10| measure = nDCG@5| value = 0.34519134224686937
query id = 11| measure = P@5| value = 0.2
query id = 11| measure = R@5| value = 0.007874015748031496
query id = 11| measure = nDCG@5| value = 0.16958010263680806
query id = 12| measure = P@5| value = 0.0
query id = 12| measure = R@5| value = 0.0
query id = 12| measure = nDCG@5| value = 0.0
query id = 13| measure = P@5| value = 0.4
query id = 13| measure = R@5| value = 0.02197802197802198
query id = 13| measure = nDCG@5| value = 0.36005461457723403
query id = 14| measure = P@5| value = 0.0
query id = 14| measure = R@5| value = 0.0
query id = 14| measure = nDCG@5| value = 0.0
query id = 15| measure = P@5| value = 0.4
query id = 15| measure = R@5| value = 0.024390243902439025
query id = 15| measure = nDCG@5| value = 0.48522855511632257
query id = 16| measure = P@5| value = 0.4
query id = 16| measure = R@5| value = 0.07692307692307693
query id = 16| measure = nDCG@5| value = 0.30078518014914984
query id = 17| measure = P@5| value = 0.2
query id = 17| measure = R@5| value = 0.038461538461538464
query id = 17| measure = nDCG@5| value = 0.21398626473452756
query id = 18| measure = P@5| value = 0.2
query id = 18| measure = R@5| value = 0.09090909090909091
query id = 18| measure = nDCG@5| value = 0.3391602052736161
query id = 19| measure = P@5| value = 0.8
query id = 19| measure = R@5| value = 0.04938271604938271
query id = 19| measure = nDCG@5| value = 0.6608397947263839
query id = 20| measure = P@5| value = 0.0
query id = 20| measure = R@5| value = 0.0
query id = 20| measure = nDCG@5| value = 0.0
query id = 21| measure = P@5| value = 0.4
query id = 21| measure = R@5| value = 0.08
query id = 21| measure = nDCG@5| value = 0.3156484524795145
query id = 22| measure = P@5| value = 0.0
query id = 22| measure = R@5| value = 0.0
query id = 22| measure = nDCG@5| value = 0.0
query id = 23| measure = P@5| value = 0.0
query id = 23| measure = R@5| value = 0.0
query id = 23| measure = nDCG@5| value = 0.0
query id = 24| measure = P@5| value = 0.8
query id = 24| measure = R@5| value = 0.07692307692307693
query id = 24| measure = nDCG@5| value = 0.8687949224876582
query id = 25| measure = P@5| value = 0.6
query id = 25| measure = R@5| value = 0.09090909090909091
query id = 25| measure = nDCG@5| value = 0.4912596920895758
query id = 26| measure = P@5| value = 0.8
query id = 26| measure = R@5| value = 0.07142857142857142
query id = 26| measure = nDCG@5| value = 0.6608397947263839
query id = 27| measure = P@5| value = 0.4
query id = 27| measure = R@5| value = 0.017391304347826087
query id = 27| measure = nDCG@5| value = 0.34519134224686937
query id = 28| measure = P@5| value = 0.6
query id = 28| measure = R@5| value = 0.05
query id = 28| measure = nDCG@5| value = 0.6992148198508501
query id = 29| measure = P@5| value = 0.4
query id = 29| measure = R@5| value = 0.041666666666666664
query id = 29| measure = nDCG@5| value = 0.5531464700081437
query id = 30| measure = P@5| value = 0.8
query id = 30| measure = R@5| value = 0.029850746268656716
query id = 30| measure = nDCG@5| value = 0.6608397947263839
query id = 31| measure = P@5| value = 0.4
query id = 31| measure = R@5| value = 0.03278688524590164
query id = 31| measure = nDCG@5| value = 0.38356636737133565
query id = 32| measure = P@5| value = 0.2
query id = 32| measure = R@5| value = 0.008547008547008548
query id = 32| measure = nDCG@5| value = 0.3391602052736161
query id = 33| measure = P@5| value = 0.2
query id = 33| measure = R@5| value = 0.05
query id = 33| measure = nDCG@5| value = 0.14606834984270645
query id = 34| measure = P@5| value = 0.4
query id = 34| measure = R@5| value = 0.05263157894736842
query id = 34| measure = nDCG@5| value = 0.48522855511632257
query id = 35| measure = P@5| value = 0.6
query id = 35| measure = R@5| value = 0.06976744186046512
query id = 35| measure = nDCG@5| value = 0.639945385422766
query id = 37| measure = P@5| value = 0.4
query id = 37| measure = R@5| value = 0.05
query id = 37| measure = nDCG@5| value = 0.4703652827859579
query id = 39| measure = P@5| value = 0.2
query id = 39| measure = R@5| value = 0.05555555555555555
query id = 39| measure = nDCG@5| value = 0.3391602052736161
query id = 41| measure = P@5| value = 0.6
query id = 41| measure = R@5| value = 0.2727272727272727
query id = 41| measure = nDCG@5| value = 0.5147714448836774
query id = 42| measure = P@5| value = 0.2
query id = 42| measure = R@5| value = 0.02
query id = 42| measure = nDCG@5| value = 0.16958010263680806
query id = 43| measure = P@5| value = 0.2
query id = 43| measure = R@5| value = 0.07692307692307693
query id = 43| measure = nDCG@5| value = 0.14606834984270645
query id = 44| measure = P@5| value = 0.6
query id = 44| measure = R@5| value = 0.01935483870967742
query id = 44| measure = nDCG@5| value = 0.639945385422766
query id = 45| measure = P@5| value = 0.2
query id = 45| measure = R@5| value = 0.012987012987012988
query id = 45| measure = nDCG@5| value = 0.21398626473452756
query id = 46| measure = P@5| value = 0.4
query id = 46| measure = R@5| value = 0.017241379310344827
query id = 46| measure = nDCG@5| value = 0.4703652827859579
query id = 49| measure = P@5| value = 0.4
query id = 49| measure = R@5| value = 0.058823529411764705
query id = 49| measure = nDCG@5| value = 0.5087403079104241
query id = 50| measure = P@5| value = 0.6
query id = 50| measure = R@5| value = 0.033707865168539325
query id = 50| measure = nDCG@5| value = 0.5147714448836774
query id = 52| measure = P@5| value = 1.0
query id = 52| measure = R@5| value = 0.3333333333333333
query id = 52| measure = nDCG@5| value = 1.0
query id = 54| measure = P@5| value = 0.2
query id = 54| measure = R@5| value = 0.0196078431372549
query id = 54| measure = nDCG@5| value = 0.14606834984270645
query id = 55| measure = P@5| value = 1.0
query id = 55| measure = R@5| value = 0.2777777777777778
query id = 55| measure = nDCG@5| value = 1.0
query id = 56| measure = P@5| value = 0.0
query id = 56| measure = R@5| value = 0.0
query id = 56| measure = nDCG@5| value = 0.0
query id = 57| measure = P@5| value = 0.4
query id = 57| measure = R@5| value = 0.1111111111111111
query id = 57| measure = nDCG@5| value = 0.48522855511632257
query id = 58| measure = P@5| value = 0.8
query id = 58| measure = R@5| value = 0.08695652173913043
query id = 58| measure = nDCG@5| value = 0.8539316501572937
query id = 61| measure = P@5| value = 0.0
query id = 61| measure = R@5| value = 0.0
query id = 61| measure = nDCG@5| value = 0.0
query id = 62| measure = P@5| value = 0.6
query id = 62| measure = R@5| value = 0.25
query id = 62| measure = nDCG@5| value = 0.6992148198508501
query id = 65| measure = P@5| value = 0.6
query id = 65| measure = R@5| value = 0.23076923076923078
query id = 65| measure = nDCG@5| value = 0.7227265726449519
query id = 66| measure = P@5| value = 1.0
query id = 66| measure = R@5| value = 0.14285714285714285
query id = 66| measure = nDCG@5| value = 1.0
query id = 67| measure = P@5| value = 0.0
query id = 67| measure = R@5| value = 0.0
query id = 67| measure = nDCG@5| value = 0.0
query id = 69| measure = P@5| value = 0.4
query id = 69| measure = R@5| value = 0.13333333333333333
query id = 69| measure = nDCG@5| value = 0.36005461457723403
query id = 71| measure = P@5| value = 0.8
query id = 71| measure = R@5| value = 0.14814814814814814
query id = 71| measure = nDCG@5| value = 0.830419897363192
query id = 76| measure = P@5| value = 1.0
query id = 76| measure = R@5| value = 0.08333333333333333
query id = 76| measure = nDCG@5| value = 1.0
query id = 79| measure = P@5| value = 0.6
query id = 79| measure = R@5| value = 0.2727272727272727
query id = 79| measure = nDCG@5| value = 0.6548086577531307
query id = 81| measure = P@5| value = 0.2
query id = 81| measure = R@5| value = 0.09090909090909091
query id = 81| measure = nDCG@5| value = 0.3391602052736161
query id = 82| measure = P@5| value = 0.2
query id = 82| measure = R@5| value = 0.1
query id = 82| measure = nDCG@5| value = 0.14606834984270645
query id = 84| measure = P@5| value = 0.0
query id = 84| measure = R@5| value = 0.0
query id = 84| measure = nDCG@5| value = 0.0
query id = 90| measure = P@5| value = 0.0
query id = 90| measure = R@5| value = 0.0
query id = 90| measure = nDCG@5| value = 0.0
query id = 92| measure = P@5| value = 0.8
query id = 92| measure = R@5| value = 0.10526315789473684
query id = 92| measure = nDCG@5| value = 0.8539316501572937
query id = 95| measure = P@5| value = 0.2
query id = 95| measure = R@5| value = 0.09090909090909091
query id = 95| measure = nDCG@5| value = 0.21398626473452756
query id = 96| measure = P@5| value = 0.4
query id = 96| measure = R@5| value = 0.2222222222222222
query id = 96| measure = nDCG@5| value = 0.48522855511632257
query id = 97| measure = P@5| value = 0.2
query id = 97| measure = R@5| value = 0.16666666666666666
query id = 97| measure = nDCG@5| value = 0.3391602052736161
query id = 98| measure = P@5| value = 0.8
query id = 98| measure = R@5| value = 0.13793103448275862
query id = 98| measure = nDCG@5| value = 0.8687949224876582
query id = 99| measure = P@5| value = 1.0
query id = 99| measure = R@5| value = 0.14705882352941177
query id = 99| measure = nDCG@5| value = 1.0
query id = 100| measure = P@5| value = 0.2
query id = 100| measure = R@5| value = 0.05555555555555555
query id = 100| measure = nDCG@5| value = 0.3391602052736161
query id = 101| measure = P@5| value = 0.2
query id = 101| measure = R@5| value = 1.0
query id = 101| measure = nDCG@5| value = 0.38685280723454163
query id = 102| measure = P@5| value = 1.0
query id = 102| measure = R@5| value = 0.20833333333333334
query id = 102| measure = nDCG@5| value = 1.0
query id = 104| measure = P@5| value = 0.2
query id = 104| measure = R@5| value = 0.09090909090909091
query id = 104| measure = nDCG@5| value = 0.13120507751234178
query id = 109| measure = P@5| value = 0.2
query id = 109| measure = R@5| value = 0.014084507042253521
query id = 109| measure = nDCG@5| value = 0.3391602052736161
query id = 111| measure = P@5| value = 0.4
query id = 111| measure = R@5| value = 0.3333333333333333
query id = 111| measure = nDCG@5| value = 0.5531464700081437
</pre></div>
</div>
</div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#view-documents">View documents</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#perform-a-query">Perform a query</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#preprocess-data">Preprocess data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#create-vocabulary">Create vocabulary</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Benoit Crabbé
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=bd9e20870c6007c4c509"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=bd9e20870c6007c4c509"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>